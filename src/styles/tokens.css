@layer reset, base, tokens, utilities, components;

@layer tokens {
  :root {
    color-scheme: light dark;
    font-family: var(--font-sans);

    /* Typography */
    --font-serif:
      'Cormorant Garamond', 'Iowan Old Style', 'Times New Roman', serif;
    --font-sans:
      'IBM Plex Sans', 'Inter', system-ui, -apple-system, BlinkMacSystemFont,
      'Segoe UI', sans-serif;
    --heading-display: clamp(4.5rem, 6vw + 2rem, 7.5rem);
    --heading-xl: clamp(2.75rem, 1.5vw + 2.25rem, 3.5rem);
    --heading-lg: clamp(2rem, 1vw + 1.75rem, 2.75rem);
    --heading-md: clamp(1.5rem, 0.8vw + 1.3rem, 2rem);
    --text-lg: clamp(1.125rem, 0.4vw + 1rem, 1.35rem);
    --text-md: 1rem;
    --text-sm: 0.875rem;

    /* Sizing & spacing */
    --size-max-width: clamp(1240px, 88vw, 2100px);
    --size-readable: 68ch;
    --space-2xs: 0.375rem;
    --space-xs: 0.625rem;
    --space-sm: 0.875rem;
    --space-md: 1.25rem;
    --space-lg: 2rem;
    --space-xl: 3rem;
    --space-2xl: 4.5rem;
    --space-3xl: 6rem;

    /* Radii & shadows */
    --radius-sm: 10px;
    --radius-md: 18px;
    --radius-lg: 26px;
    --shadow-sm: 0 6px 12px -8px rgba(10, 7, 5, 0.25);
    --shadow-md: 0 20px 40px -30px rgba(10, 7, 5, 0.6);
    --shadow-lg: 0 40px 70px -45px rgba(0, 0, 0, 0.75);
    --color-shadow: rgba(32, 22, 17, 0.65);

    /* Motion */
    --ease-smooth: cubic-bezier(0.33, 1, 0.68, 1);
    --ease-emphatic: cubic-bezier(0.7, 0, 0.2, 1);
    --duration-fast: 180ms;
    --duration-base: 280ms;
    --duration-slow: 420ms;
  }

  :root,
  :root[data-theme='light'] {
    --color-bg: #f7f1ec;
    --color-surface: #fbf7f4;
    --color-surface-strong: #efe1d9;
    --color-surface-muted: #e4d4c9;
    --color-primary: #a47764; /* Mocha Mousse */
    --color-primary-strong: #7d5545;
    --color-primary-soft: #c6a296;
    --color-text: #231612;
    --color-text-muted: #4a3b33;
    --color-text-subtle: #6e5c54;
    --color-border: #d6c3b7;
    --color-shadow: rgba(32, 22, 17, 0.65);
    --color-science-green: #297b66;
    --color-science-purple: #5c4b88;
    --color-science-amber: #d7893c;
    --color-success: #1f7a6a;
    --color-danger: #9d3c40;
    --color-code-bg: #1f120f;
    --color-code-text: #f6ede8;
    --gradient-backdrop:
      radial-gradient(
        120% 120% at 10% 10%,
        rgba(89, 68, 115, 0.15) 0%,
        transparent 65%
      ),
      radial-gradient(
        110% 110% at 90% 20%,
        rgba(41, 123, 102, 0.16) 0%,
        transparent 70%
      ),
      radial-gradient(
        120% 120% at 50% 80%,
        rgba(167, 119, 100, 0.22) 0%,
        transparent 75%
      );
  }

  :root[data-theme='dark'] {
    color-scheme: dark;
    --color-bg: #100b09;
    --color-surface: #1b1310;
    --color-surface-strong: #2a1d18;
    --color-surface-muted: #3b2c26;
    --color-primary: #c69a86;
    --color-primary-strong: #e6c5b7;
    --color-primary-soft: rgba(198, 154, 134, 0.28);
    --color-text: #f5ebe5;
    --color-text-muted: #d5c7bf;
    --color-text-subtle: #a8968d;
    --color-border: #4a362f;
    --color-shadow: rgba(5, 3, 2, 0.85);
    --color-science-green: #4bd3b2;
    --color-science-purple: #9f8cd4;
    --color-science-amber: #f1c078;
    --color-success: #4bd3b2;
    --color-danger: #f16f74;
    --color-code-bg: #0b0605;
    --color-code-text: #f9efe8;
    --gradient-backdrop:
      radial-gradient(
        100% 120% at 15% 25%,
        rgba(88, 57, 126, 0.3) 0%,
        transparent 70%
      ),
      radial-gradient(
        80% 90% at 80% 15%,
        rgba(45, 122, 106, 0.3) 0%,
        transparent 75%
      ),
      radial-gradient(
        140% 120% at 50% 90%,
        rgba(167, 119, 100, 0.35) 0%,
        transparent 80%
      );
  }
}

@layer base {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    margin: 0;
    font-family: var(--font-sans);
    font-size: var(--text-md);
    line-height: 1.6;
    background: var(--color-bg);
    color: var(--color-text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    background: var(--color-bg);
    background-image: var(--gradient-backdrop);
    background-size: cover;
    background-repeat: no-repeat;
  }

  ::selection {
    background: color-mix(in oklab, var(--color-primary) 80%, black 5%);
    color: var(--color-code-text);
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  a:hover,
  a:focus-visible {
    text-decoration: underline;
    text-decoration-thickness: 2px;
    text-underline-offset: 4px;
  }

  img {
    max-width: 100%;
    display: block;
  }

  code,
  pre {
    font-family:
      'Berkeley Mono', 'IBM Plex Mono', 'Fira Code', ui-monospace,
      SFMono-Regular, SFMono, Menlo, Monaco, Consolas, 'Liberation Mono',
      'Courier New', monospace;
  }

  h1,
  h2,
  h3,
  h4 {
    margin: 0;
    font-family: var(--font-serif);
    font-weight: 500;
    color: var(--color-text);
  }

  p {
    margin: 0;
    color: var(--color-text-muted);
  }

  strong {
    color: var(--color-text);
  }

  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }
}
