---
import type { Project } from '../../content/home';
import ProjectDetailList from './ProjectDetailList.astro';
import { getProjectDetails } from './projectDetails';

interface Props {
  project: Project;
}

const { project } = Astro.props as Props;
const details = getProjectDetails(project);
---

{
  (() => {
    switch (project.layout) {
      case 'wide':
        return (
          <article class="project-card project-card--wide u-glass" data-reveal>
            <header>
              <h3>{project.title}</h3>
              <p>{project.summary}</p>
            </header>
            <div class="project-card__content">
              <div>
                <h4>Problem</h4>
                <p>{project.problem}</p>
              </div>
              <div>
                <h4>Solution</h4>
                <p>{project.solution}</p>
              </div>
              <ProjectDetailList detail={details.stack} wrapper="div" />
            </div>
            <div class="project-card__footer">
              <ProjectDetailList detail={details.results} wrapper="div" />
              <ProjectDetailList detail={details.challenges} wrapper="div" />
            </div>
            {project.link && (
              <a class="project-card__link" href={project.link}>
                Read research-style case study â†’
              </a>
            )}
          </article>
        );
      case 'standard':
        return (
          <article class="project-card project-card--standard" data-reveal>
            <header>
              <h3>{project.title}</h3>
              <p>{project.summary}</p>
            </header>
            <dl>
              <div>
                <dt>Problem</dt>
                <dd>{project.problem}</dd>
              </div>
              <div>
                <dt>Solution</dt>
                <dd>{project.solution}</dd>
              </div>
            </dl>
            <div class="project-card__meta">
              <ProjectDetailList detail={details.stack} />
              <ProjectDetailList detail={details.results} />
              <ProjectDetailList detail={details.challenges} />
            </div>
          </article>
        );
      case 'tall':
        return (
          <article class="project-card project-card--tall" data-reveal>
            <header>
              <h3>{project.title}</h3>
              <p>{project.summary}</p>
            </header>
            <div class="project-card__meta">
              <h4>Problem</h4>
              <p>{project.problem}</p>
              <h4>Solution</h4>
              <p>{project.solution}</p>
            </div>
            <div class="project-card__meta">
              <ProjectDetailList detail={details.stack} />
              <ProjectDetailList detail={details.results} />
              <ProjectDetailList detail={details.challenges} />
            </div>
          </article>
        );
      default:
        return null;
    }
  })()
}
